package service

import (
	"context"
	"testing"
)

func TestUnmarshalXml(t *testing.T) {
	service := New()
	content := `wxid_dl7i57grkf5q12:
	<msg>
		<img aeskey="38d1392f289a48863d433293db41b924" encryver="1"
			cdnthumbaeskey="38d1392f289a48863d433293db41b924:"
			cdnthumburl="3057020100044b30490201000204a1b9e69d02032f5853020431743070020464048430042466393534313230342d353931302d346463372d383536622d633466303735396330396134020401292a010201000405004c543f00"
			cdnthumblength="7042" cdnthumbheight="90" cdnthumbwidth="120" cdnmidheight="0"
			cdnmidwidth="0" cdnhdheight="0" cdnhdwidth="0"
			cdnmidimgurl="3057020100044b30490201000204a1b9e69d02032f5853020431743070020464048430042466393534313230342d353931302d346463372d383536622d633466303735396330396134020401292a010201000405004c543f00"
			length="27227"
			cdnbigimgurl="3057020100044b30490201000204a1b9e69d02032f5853020431743070020464048430042466393534313230342d353931302d346463372d383536622d633466303735396330396134020401292a010201000405004c543f00"
			hdlength="4898674" md5="4d38359fa55446c544a8a9e34d167370" hevc_mid_size="27227" />
		<platform_signature></platform_signature>
		<imgdatahash></imgdatahash>
	</msg>`
	result, err := service.HandleImage(context.Background(), content, true, true)
	if err != nil {
		t.Error(err)
	}

	t.Log(result)
}
